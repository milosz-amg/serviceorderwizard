<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    xmlns:core="sap.ui.core"
    controllerName="com.mr.serviceorderwizard.controller.Orders"
>
    <Page
        id="ordersPage"
        title="{i18n>ordersPageTitle}"
    >
        <content>
            <VBox
                id="mainBox"
                width="100%"
                class="sapUiMediumMargin"
            >
                <!-- Header with buttons -->
                <HBox
                    id="headerBox"
                    justifyContent="SpaceBetween"
                    alignItems="Center"
                    class="sapUiSmallMarginBottom"
                >
                    <Title
                        id="ordersTitle"
                        text="{i18n>ordersListTitle}"
                        level="H2"
                    />
                    <HBox
                        id="buttonBox"
                        class="sapUiMediumMarginEnd"
                    >
                        <Button
                            id="refreshButton"
                            text="{i18n>refreshButton}"
                            press="onRefresh"
                            icon="sap-icon://refresh"
                            type="Emphasized"
                            class="sapUiTinyMarginEnd"
                        />
                    </HBox>
                </HBox>

                <!-- Status message -->
                <MessageStrip
                    id="statusMessage"
                    text="{/statusMessage}"
                    type="{/messageType}"
                    visible="{/showMessage}"
                    class="sapUiSmallMarginBottom"
                />

                <!-- Table view -->
                <Table
                    id="ordersTable"
                    items="{/orders}"
                    visible="true"
                    inset="false"
                    growing="true"
                    growingThreshold="20"
                    noDataText="{i18n>ordersNoDataText}"
                >
                    <headerToolbar>
                        <OverflowToolbar id="tableToolbar">
                            <content>
                                <Title
                                    id="tableTitle"
                                    text="{= ${i18n>ordersTableTitle} + ' (' + ${/ordersCount} + ')' }"
                                />
                            </content>
                        </OverflowToolbar>
                    </headerToolbar>

                    <columns>
                        <!-- ID column (narrow) -->
                        <Column id="col1" width="6rem">
                            <Text
                                id="header1"
                                text="{i18n>ordersColId}"
                            />
                        </Column>

                        <!-- Order creation date (narrow) -->
                        <Column id="colCreated" width="8rem">
                            <Text
                                id="headerCreated"
                                text="{i18n>ordersColCreatedDate}"
                            />
                        </Column>

                        <!-- Visit date (narrow) -->
                        <Column id="col7" width="8rem">
                            <Text
                                id="header7"
                                text="{i18n>ordersColVisitDate}"
                            />
                        </Column>

                        <!-- City (flexible) -->
                        <Column id="col4" width="12rem">
                            <Text
                                id="header4"
                                text="{i18n>ordersColCity}"
                            />
                        </Column>

                        <!-- Status (narrow) -->
                        <Column id="col8" width="7rem">
                            <Text
                                id="header8"
                                text="{i18n>ordersColStatus}"
                            />
                        </Column>

                        <Column id="colDetails" width="6rem">
                            <Text
                                id="headerDetails"
                                text="{i18n>ordersColDetails}"
                            />
                        </Column>

                        <Column id="colDelete" width="6rem">
                            <Text
                                id="headerDelete"
                                text="{i18n>ordersColActions}"
                            />
                        </Column>
                    </columns>

                    <items>
                        <ColumnListItem
                            id="orderItem"
                            press="onOrderPress"
                        >
                            <cells>
                                <Text
                                    id="cell1"
                                    text="{
                                        path: 'OrderId',
                                        formatter: '.formatter.formatOrderId'
                                    }"
                                />
                                <Text
                                    id="cell77"
                                    text="{
                                        path: 'OrderCreationDate',
                                        formatter: '.formatDate'
                         }"
                                />
                                <Text
                                    id="cell7"
                                    text="{
                                        path: 'Visitdate',
                                        formatter: '.formatDate'
                         }"
                                />

                                <Text
                                    id="cell4"
                                    text="{Addresscity}"
                                />

                                <Text
                                    id="cell8"
                                    text="{Status}"
                                />
                                <Button
                                    id="detailsButton"
                                    text="{i18n>detailsButton}"
                                    icon="sap-icon://detail-view"
                                    press="onShowDetails"
                                    type="Transparent"
                                />
                                <Button
                                    id="deleteButton"
                                    text="{i18n>deleteButton}"
                                    icon="sap-icon://delete"
                                    type="Reject"
                                    press="onDeleteOrder"
                                />
                            </cells>
                        </ColumnListItem>
                    </items>
                </Table>
            </VBox>
        </content>
    </Page>
</mvc:View>
