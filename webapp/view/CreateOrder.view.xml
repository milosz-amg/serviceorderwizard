<mvc:View
    xmlns:mvc="sap.ui.core.mvc"
    xmlns="sap.m"
    controllerName="com.mr.serviceorderwizard.controller.CreateOrder"
    xmlns:core="sap.ui.core"
    xmlns:form="sap.ui.layout.form"
    height="100%"
>
    <NavContainer id="wizardNavContainer">
        <pages>
            <Page
                id="wizardContentPage"
                showHeader="false"
            >
                <content>
                    <Wizard
                        id="createOrderWizard"
                        finishButtonText="Zakończ"
                        complete="wizardCompletedHandler"
                    >
                        <WizardStep
                            id="stepPersonalData"
                            title="Dane osobowe"
                            validated="false"
                            activate="onStepActivate"
                        >
                            <MessageStrip
                                id="wizardInfoMessage"
                                class="sapUiSmallMarginBottom"
                                text="Informacja o przetwarzaniu danych osobowych (RODO)"
                                showIcon="true"
                            />

                            <Text
                                text="Zgodnie z art. 13 Rozporządzenia Parlamentu Europejskiego i Rady (UE) 2016/679 z dnia 27 kwietnia 2016 r. (RODO), informujemy, że:
                                Administratorem Twoich danych osobowych jest [Nazwa firmy/organizacji], z siedzibą w [adres firmy].
                                Twoje dane osobowe będą przetwarzane wyłącznie w celu realizacji zamówienia oraz świadczenia usług serwisowych, zgodnie z obowiązującymi przepisami prawa.
                                Podanie danych osobowych jest dobrowolne, ale niezbędne do realizacji zamówienia. Brak podania danych uniemożliwi realizację usługi.
                                Masz prawo dostępu do swoich danych, ich sprostowania, usunięcia, ograniczenia przetwarzania, przenoszenia danych, wniesienia sprzeciwu wobec przetwarzania oraz cofnięcia zgody w dowolnym momencie.
                                Twoje dane nie będą przekazywane podmiotom trzecim bez Twojej wyraźnej zgody, chyba że wymagają tego przepisy prawa.
                                W przypadku pytań dotyczących przetwarzania danych osobowych prosimy o kontakt pod adresem e-mail: [adres e-mail]."
                            />

                            <form:SimpleForm
                                editable="true"
                                layout="ResponsiveGridLayout"
                                title="Dane osobowe"
                            >
                                <Label
                                    id="firstNameLabel"
                                    text="Imię"
                                    labelFor="firstNameInput"
                                />
                                <Input
                                    id="firstNameInput"
                                    placeholder="Wpisz imię"
                                    required="true"
                                    liveChange="validatePersonalData"
                                    valueState="None"
                                    value="{orderData>/personalData/firstName}"
                                />

                                <Label
                                    id="lastNameLabel"
                                    text="Nazwisko"
                                    labelFor="lastNameInput"
                                />
                                <Input
                                    id="lastNameInput"
                                    placeholder="Wpisz nazwisko"
                                    required="true"
                                    liveChange="validatePersonalData"
                                    valueState="None"
                                    value="{orderData>/personalData/lastName}"
                                />

                                <Label
                                    id="phoneNumberLabel"
                                    text="Numer telefonu"
                                    labelFor="phoneNumberInput"
                                />
                                <Input
                                    id="phoneNumberInput"
                                    placeholder="Wpisz numer telefonu"
                                    required="true"
                                    liveChange="validatePersonalData"
                                    valueState="None"
                                    value="{orderData>/personalData/phoneNumber}"
                                />

                                <Label
                                    id="addressFirstLineLabel"
                                    text="Adres (linia 1)"
                                    labelFor="addressFirstLineInput"
                                />
                                <Input
                                    id="addressFirstLineInput"
                                    placeholder="Wpisz adres (linia 1)"
                                    liveChange="validatePersonalData"
                                    valueState="None"
                                    value="{orderData>/personalData/addressFirstLine}"
                                />

                                <Label
                                    id="addressSecondLineLabel"
                                    text="Adres (linia 2)"
                                    labelFor="addressSecondLineInput"
                                />
                                <Input
                                    id="addressSecondLineInput"
                                    placeholder="Wpisz adres (linia 2)"
                                    valueState="None"
                                    value="{orderData>/personalData/addressSecondLine}"
                                />

                                <Label
                                    id="addressZipCodeLabel"
                                    text="Kod pocztowy"
                                    required="true"
                                    labelFor="addressZipCodeInput"
                                />
                                <Input
                                    id="addressZipCodeInput"
                                    placeholder="Wpisz kod pocztowy (5 cyfr)"
                                    liveChange="validatePersonalData"
                                    valueState="None"
                                    value="{orderData>/personalData/addressZipCode}"
                                />

                                <Label
                                    id="addressCityLabel"
                                    text="Miasto"
                                    required="true"
                                    labelFor="addressCityInput"
                                />
                                <Input
                                    id="addressCityInput"
                                    placeholder="Wpisz miasto"
                                    required="true"
                                    liveChange="validatePersonalData"
                                    valueState="None"
                                    value="{orderData>/personalData/addressCity}"
                                />
                            </form:SimpleForm>
                        </WizardStep>
                        <WizardStep
                            id="stepFaultDesc"
                            title="Opis usterki"
                            validated="false"
                            activate="onStepActivate"
                        >
                            <MessageStrip
                                class="sapUiSmallMarginBottom"
                                text="Dokładny opis usterki pomoże naszym technikom szybciej zdiagnozować problem i przygotować się do wizyty."
                                showIcon="true"
                            />
                            <form:SimpleForm
                                editable="true"
                                layout="ResponsiveGridLayout"
                                title="Informacje o urządzeniu"
                            >
                                <Label
                                    id="deviceTypeLabel"
                                    text="Typ urządzenia"
                                    required="true"
                                    labelFor="deviceTypeComboBox"
                                />
                                <ComboBox
                                    width="100%"
                                    id="deviceTypeComboBox"
                                    required="true"
                                    placeholder="Podaj typ urządzenia"
                                    change="onDeviceTypeChange"
                                    valueState="None"
                                    selectedKey="{orderData>/deviceData/deviceType}"
                                >
                                    <core:Item
                                        key="Laptop"
                                        text="Laptop"
                                    />
                                    <core:Item
                                        key="Smartphone"
                                        text="Smartphone"
                                    />
                                    <core:Item
                                        key="Tablet"
                                        text="Tablet"
                                    />
                                    <core:Item
                                        key="Konsola"
                                        text="Konsola"
                                    />
                                    <core:Item
                                        key="Telewizor"
                                        text="Telewizor"
                                    />
                                    <core:Item
                                        key="Drukarka"
                                        text="Drukarka"
                                    />
                                    <core:Item
                                        key="Router"
                                        text="Router"
                                    />
                                    <core:Item
                                        key="Monitor"
                                        text="Monitor komputerowy"
                                    />
                                    <core:Item
                                        key="Smartwatch"
                                        text="Smartwatch"
                                    />
                                    <core:Item
                                        key="GlosnikBluetooth"
                                        text="Głośnik Bluetooth"
                                    />
                                    <core:Item
                                        key="Inne"
                                        text="Inne"
                                    />
                                </ComboBox>

                                <Label
                                    text="Model urządzenia"
                                    required="true"
                                />
                                <ComboBox
                                    id="deviceModelInput"
                                    placeholder="Wpisz lub wybierz model urządzenia"
                                    required="true"
                                    change="validateFaultDesc"
                                    value="{orderData>/deviceData/deviceModel}"
                                    valueState="None"
                                />

                                <Label
                                    id="deviceSerialNumberLabel"
                                    text="Numer seryjny urządzenia"
                                    labelFor="deviceSerialNumberInput"
                                />
                                <Input
                                    id="deviceSerialNumberInput"
                                    placeholder="Wpisz numer seryjny urządzenia"
                                    valueState="None"
                                    value="{orderData>/deviceData/deviceSerialNumber}"
                                />

                                <Label
                                    id="faultDescLabel"
                                    text="Opis usterki"
                                    labelFor="faultDescInput"
                                />
                                <TextArea
                                    width="100%"
                                    id="faultDescInput"
                                    placeholder="Opisz usterkę"
                                    rows="8"
                                    liveChange="validateFaultDesc"
                                    valueState="None"
                                    value="{orderData>/deviceData/faultDescription}"
                                />
                            </form:SimpleForm>
                        </WizardStep>
                        <WizardStep
                            id="stepVisitDate"
                            title="Data wizyty"
                            validated="false"
                            activate="onStepActivate"
                        >
                            <form:SimpleForm
                                editable="true"
                                layout="ResponsiveGridLayout"
                                title="Termin wizyty"
                            >
                                <Label
                                    id="visitDateLabel"
                                    text="Data wizyty"
                                    labelFor="visitDateInput"
                                />
                                <DatePicker
                                    id="visitDateInput"
                                    placeholder="Wybierz datę wizyty"
                                    required="true"
                                    change="validateVisitDate"
                                    valueState="None"
                                    value="{orderData>/visitData/visitDate, UTC: true }"
                                />

                                <Label
                                    id="visitTimeLabel"
                                    text="Godzina wizyty"
                                    labelFor="visitHourSelect"
                                />
                                <Select
                                    id="visitHourSelect"
                                    required="true"
                                    change="validateVisitDate"
                                    valueState="None"
                                    selectedKey="{orderData>/visitData/visitTimeKey}"
                                >
                                    <core:Item
                                        key=""
                                        text=""
                                    />
                                    <core:Item
                                        key="08"
                                        text="08:00"
                                    />
                                    <core:Item
                                        key="09"
                                        text="09:00"
                                    />
                                    <core:Item
                                        key="10"
                                        text="10:00"
                                    />
                                    <core:Item
                                        key="11"
                                        text="11:00"
                                    />
                                    <core:Item
                                        key="12"
                                        text="12:00"
                                    />
                                    <core:Item
                                        key="13"
                                        text="13:00"
                                    />
                                    <core:Item
                                        key="14"
                                        text="14:00"
                                    />
                                    <core:Item
                                        key="15"
                                        text="15:00"
                                    />
                                    <core:Item
                                        key="16"
                                        text="16:00"
                                    />
                                </Select>
                            </form:SimpleForm>
                        </WizardStep>
                        <WizardStep
                            id="stepSummary"
                            title="Podsumowanie"
                            validated="true"
                            activate="onStepActivate"
                        >
                            <MessageStrip
                                class="sapUiSmallMarginBottom"
                                text="Po kliknięciu 'Generuj zlecenie', zostaniesz przeniesiony do podsumowania zamówienia, gdzie będziesz mógł zweryfikować wszystkie wprowadzone dane przed finalnym zatwierdzeniem."
                                showIcon="true"
                            />
                            <Button
                                id="submitOrderButton"
                                text="Generuj zlecenie"
                                press="onSubmitOrder"
                            />
                        </WizardStep>
                    </Wizard>
                </content>
                <footer>
                    <OverflowToolbar>
                        <ToolbarSpacer />
                        <Button
                            text="Anuluj"
                            press="handleWizardCancel"
                        />
                    </OverflowToolbar>
                </footer>
            </Page>

            <Page
                id="wizardReviewPage"
                showHeader="false"
            >
                <content>
                    <form:SimpleForm
                        title="1. Dane osobowe"
                        editable="false"
                        layout="ResponsiveGridLayout"
                    >
                        <form:content>
                            <Label text="Imię" />
                            <Text
                                id="FirstNameChosen"
                                text="{orderData>/personalData/firstName}"
                            />
                            <Label text="Nazwisko" />
                            <Text
                                id="LastNameChosen"
                                text="{orderData>/personalData/lastName}"
                            />
                            <Label text="Telefon" />
                            <Text
                                id="PhoneNumberChosen"
                                text="{orderData>/personalData/phoneNumber}"
                            />
                            <Label text="Adres" />
                            <Text
                                id="AddressChosen"
                                text="{orderData>/personalData/addressFirstLine} {orderData>/personalData/addressSecondLine}, {orderData>/personalData/addressZipCode} {orderData>/personalData/addressCity}"
                            />
                            <Link
                                press="editStepOne"
                                text="Edytuj"
                            />
                        </form:content>
                    </form:SimpleForm>

                    <form:SimpleForm
                        title="2. Informacje o urządzeniu"
                        editable="false"
                        layout="ResponsiveGridLayout"
                    >
                        <form:content>
                            <Label text="Typ urządzenia" />
                            <Text
                                id="DeviceTypeChosen"
                                text="{orderData>/deviceData/deviceType}"
                            />
                            <Label text="Model" />
                            <Text
                                id="DeviceModelChosen"
                                text="{orderData>/deviceData/deviceModel}"
                            />
                            <Label text="Numer seryjny" />
                            <Text
                                id="DeviceSerialChosen"
                                text="{orderData>/deviceData/deviceSerialNumber}"
                            />
                            <Label text="Opis usterki" />
                            <Text
                                id="FaultDescriptionChosen"
                                text="{orderData>/deviceData/faultDescription}"
                            />
                            <Link
                                press="editStepTwo"
                                text="Edytuj"
                            />
                        </form:content>
                    </form:SimpleForm>

                    <form:SimpleForm
                        title="3. Termin wizyty"
                        editable="false"
                        layout="ResponsiveGridLayout"
                    >
                        <form:content>
                            <Label text="Data wizyty" />
                            <Text
                                id="VisitDateChosen"
                                text="{path: 'orderData>/visitData/visitDate', formatter: '.formatDate'}"
                            />
                            <Label text="Godzina wizyty" />
                            <Text
                                id="VisitTimeChosen"
                                text="{orderData>/visitData/visitTime}"
                            />
                            <Link
                                press="editStepThree"
                                text="Edytuj"
                            />
                        </form:content>
                    </form:SimpleForm>
                </content>
                <footer>
                    <Bar>
                        <contentRight>
                            <Button
                                text="Wyślij"
                                press="handleWizardSubmit"
                            />
                            <Button
                                text="Anuluj"
                                press="handleWizardCancel"
                            />
                        </contentRight>
                    </Bar>
                </footer>
            </Page>
        </pages>
    </NavContainer>
</mvc:View>
